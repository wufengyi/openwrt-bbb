<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ContikiUT: Trickle timers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ContikiUT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Trickle timers<div class="ingroups"><a class="el" href="group__lib.html">Lib</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrickle__timer.html">trickle_timer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad72dbcf6d0153db1b8d8a58001feed83"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad72dbcf6d0153db1b8d8a58001feed83"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEBUG</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gad72dbcf6d0153db1b8d8a58001feed83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f464e950a4fa11e8821b5c725921a15"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1f464e950a4fa11e8821b5c725921a15"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PRINTF</b>(...)</td></tr>
<tr class="separator:ga1f464e950a4fa11e8821b5c725921a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf612a348c64f66b8d578b190dc7e87ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf612a348c64f66b8d578b190dc7e87ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaf612a348c64f66b8d578b190dc7e87ed">tt_rand</a>()&#160;&#160;&#160;random_rand()</td></tr>
<tr class="memdesc:gaf612a348c64f66b8d578b190dc7e87ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wide randoms for platforms using a 4-byte wide clock (see <a class="el" href="group__trickle-timer.html#ga2b3b9fd1a895243db18b35b7600bac15" title="Turns on support for 4-byte wide, unsigned random numbers. ">TRICKLE_TIMER_WIDE_RAND</a>) <br /></td></tr>
<tr class="separator:gaf612a348c64f66b8d578b190dc7e87ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga361fa866c3bba8e5a05de3b957bc04c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga361fa866c3bba8e5a05de3b957bc04c1">TRICKLE_TIMER_COMPENSATE_DRIFT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga361fa866c3bba8e5a05de3b957bc04c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls whether the library will try to compensate for time drifts caused by getting called later than scheduled.  <a href="#ga361fa866c3bba8e5a05de3b957bc04c1">More...</a><br /></td></tr>
<tr class="separator:ga361fa866c3bba8e5a05de3b957bc04c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b3b9fd1a895243db18b35b7600bac15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga2b3b9fd1a895243db18b35b7600bac15">TRICKLE_TIMER_WIDE_RAND</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga2b3b9fd1a895243db18b35b7600bac15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns on support for 4-byte wide, unsigned random numbers.  <a href="#ga2b3b9fd1a895243db18b35b7600bac15">More...</a><br /></td></tr>
<tr class="separator:ga2b3b9fd1a895243db18b35b7600bac15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga157285503882e567c275871fd30d3016"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga157285503882e567c275871fd30d3016">TRICKLE_TIMER_MAX_IMAX_WIDTH</a>&#160;&#160;&#160;<a class="el" href="group__trickle-timer.html#ga63607c0782cac7d825d07bff8c89b3d4">TRICKLE_TIMER_MAX_IMAX_GENERIC</a></td></tr>
<tr class="memdesc:ga157285503882e567c275871fd30d3016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects a flavor for the 'Find maximum Imax' (max_imax) function.  <a href="#ga157285503882e567c275871fd30d3016">More...</a><br /></td></tr>
<tr class="separator:ga157285503882e567c275871fd30d3016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad47a05440295b6f171873f5f43384e56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gad47a05440295b6f171873f5f43384e56">TRICKLE_TIMER_ERROR_CHECKING</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gad47a05440295b6f171873f5f43384e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/Disables error checking.  <a href="#gad47a05440295b6f171873f5f43384e56">More...</a><br /></td></tr>
<tr class="separator:gad47a05440295b6f171873f5f43384e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Trickle Timer Library: Constants</h2></td></tr>
<tr class="memitem:ga72117b57dd1e192ca8a016055d2310f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga72117b57dd1e192ca8a016055d2310f3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memdesc:ga72117b57dd1e192ca8a016055d2310f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set as value of k to disable suppression. <br /></td></tr>
<tr class="separator:ga72117b57dd1e192ca8a016055d2310f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac24600ceec4a0dc4b57df1baeb4b876d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac24600ceec4a0dc4b57df1baeb4b876d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRICKLE_TIMER_ERROR</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gac24600ceec4a0dc4b57df1baeb4b876d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8075209f39b5756f0eb5c4ec4b8136e2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8075209f39b5756f0eb5c4ec4b8136e2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRICKLE_TIMER_SUCCESS</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga8075209f39b5756f0eb5c4ec4b8136e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63607c0782cac7d825d07bff8c89b3d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga63607c0782cac7d825d07bff8c89b3d4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga63607c0782cac7d825d07bff8c89b3d4">TRICKLE_TIMER_MAX_IMAX_GENERIC</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga63607c0782cac7d825d07bff8c89b3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use as the value of TRICKLE_TIMER_MAX_IMAX_WIDTH to enable the generic 'Find max Imax' routine. <br /></td></tr>
<tr class="separator:ga63607c0782cac7d825d07bff8c89b3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41b658ea4619c5e104efb050f664e3f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga41b658ea4619c5e104efb050f664e3f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga41b658ea4619c5e104efb050f664e3f1">TRICKLE_TIMER_MAX_IMAX_16_BIT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga41b658ea4619c5e104efb050f664e3f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use as the value of TRICKLE_TIMER_MAX_IMAX_WIDTH to enable the 16-bit 'Find max Imax' routine. <br /></td></tr>
<tr class="separator:ga41b658ea4619c5e104efb050f664e3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaaa2a3bec490540d904a0b4a44c6251d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaaaa2a3bec490540d904a0b4a44c6251d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaaaa2a3bec490540d904a0b4a44c6251d">TRICKLE_TIMER_MAX_IMAX_32_BIT</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gaaaa2a3bec490540d904a0b4a44c6251d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use as the value of TRICKLE_TIMER_MAX_IMAX_WIDTH to enable the 32-bit 'Find max Imax' routine. <br /></td></tr>
<tr class="separator:gaaaa2a3bec490540d904a0b4a44c6251d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45ed26596d700d8c9111751b243eae7b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga45ed26596d700d8c9111751b243eae7b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga45ed26596d700d8c9111751b243eae7b">TRICKLE_TIMER_TX_SUPPRESS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga45ed26596d700d8c9111751b243eae7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constants used as values for the <em>suppress</em> param of trickle_timer_cb_t. <br /></td></tr>
<tr class="separator:ga45ed26596d700d8c9111751b243eae7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae692f25bfc1a2915a28389db0fb2a752"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae692f25bfc1a2915a28389db0fb2a752"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TRICKLE_TIMER_TX_OK</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gae692f25bfc1a2915a28389db0fb2a752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46a9d1ac6e07dc96cfd6224b873333ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga46a9d1ac6e07dc96cfd6224b873333ca">TRICKLE_TIMER_IS_STOPPED</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga46a9d1ac6e07dc96cfd6224b873333ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">A trickle timer is considered 'stopped' when i_cur == TRICKLE_TIMER_IS_STOPPED.  <a href="#ga46a9d1ac6e07dc96cfd6224b873333ca">More...</a><br /></td></tr>
<tr class="separator:ga46a9d1ac6e07dc96cfd6224b873333ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Trickle Timer Library: Macros</h2></td></tr>
<tr class="memitem:ga8c327f7f935dcc95d89fcbbc664fcdcf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8c327f7f935dcc95d89fcbbc664fcdcf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a>&#160;&#160;&#160;((clock_time_t)~0)</td></tr>
<tr class="memdesc:ga8c327f7f935dcc95d89fcbbc664fcdcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">cross-platform method to get the maximum clock_time_t value <br /></td></tr>
<tr class="separator:ga8c327f7f935dcc95d89fcbbc664fcdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f4e1c6f73eb9c0a18db8434d7103bd6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga5f4e1c6f73eb9c0a18db8434d7103bd6">TRICKLE_TIMER_SUPPRESSION_ENABLED</a>(tt)&#160;&#160;&#160;((tt)-&gt;k != <a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>)</td></tr>
<tr class="memdesc:ga5f4e1c6f73eb9c0a18db8434d7103bd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the trickle timer's suppression feature is enabled.  <a href="#ga5f4e1c6f73eb9c0a18db8434d7103bd6">More...</a><br /></td></tr>
<tr class="separator:ga5f4e1c6f73eb9c0a18db8434d7103bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c3a5dfb5c0f102b1c9755c303620004"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga2c3a5dfb5c0f102b1c9755c303620004">TRICKLE_TIMER_SUPPRESSION_DISABLED</a>(tt)&#160;&#160;&#160;((tt)-&gt;k == <a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>)</td></tr>
<tr class="memdesc:ga2c3a5dfb5c0f102b1c9755c303620004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the trickle timer's suppression feature is disabled.  <a href="#ga2c3a5dfb5c0f102b1c9755c303620004">More...</a><br /></td></tr>
<tr class="separator:ga2c3a5dfb5c0f102b1c9755c303620004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b39325309fb89efa3b965437a249bef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga2b39325309fb89efa3b965437a249bef">TRICKLE_TIMER_PROTO_TX_ALLOW</a>(tt)&#160;&#160;&#160;(<a class="el" href="group__trickle-timer.html#ga2c3a5dfb5c0f102b1c9755c303620004">TRICKLE_TIMER_SUPPRESSION_DISABLED</a>(tt) || ((tt)-&gt;c &lt; (tt)-&gt;k))</td></tr>
<tr class="memdesc:ga2b39325309fb89efa3b965437a249bef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the protocol must go ahead with a transmission.  <a href="#ga2b39325309fb89efa3b965437a249bef">More...</a><br /></td></tr>
<tr class="separator:ga2b39325309fb89efa3b965437a249bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c8719d9d4ebb06f080442e87fd514c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga7c8719d9d4ebb06f080442e87fd514c7">TRICKLE_TIMER_PROTO_TX_SUPPRESS</a>(tt)&#160;&#160;&#160;(<a class="el" href="group__trickle-timer.html#ga5f4e1c6f73eb9c0a18db8434d7103bd6">TRICKLE_TIMER_SUPPRESSION_ENABLED</a>(tt) &amp;&amp; ((tt)-&gt;c &gt;= (tt)-&gt;k))</td></tr>
<tr class="memdesc:ga7c8719d9d4ebb06f080442e87fd514c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the protocol must suppress a transmission.  <a href="#ga7c8719d9d4ebb06f080442e87fd514c7">More...</a><br /></td></tr>
<tr class="separator:ga7c8719d9d4ebb06f080442e87fd514c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga160b7df536d05607f970ef92d1834b8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga160b7df536d05607f970ef92d1834b8b">TRICKLE_TIMER_INTERVAL_MAX</a>(tt)&#160;&#160;&#160;((tt)-&gt;i_max_abs)</td></tr>
<tr class="memdesc:ga160b7df536d05607f970ef92d1834b8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a timer's maximum interval size (Imin &lt;&lt; Imax) as a number of clock ticks.  <a href="#ga160b7df536d05607f970ef92d1834b8b">More...</a><br /></td></tr>
<tr class="separator:ga160b7df536d05607f970ef92d1834b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee0150ea3a6efe6136abcb2a9019d096"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaee0150ea3a6efe6136abcb2a9019d096">TRICKLE_TIMER_INTERVAL_END</a>(tt)&#160;&#160;&#160;((tt)-&gt;i_start + (tt)-&gt;i_cur)</td></tr>
<tr class="memdesc:gaee0150ea3a6efe6136abcb2a9019d096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current trickle interval's end (absolute time in ticks)  <a href="#gaee0150ea3a6efe6136abcb2a9019d096">More...</a><br /></td></tr>
<tr class="separator:gaee0150ea3a6efe6136abcb2a9019d096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf18c0aac91ab42fe0ebb332650330cc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaf18c0aac91ab42fe0ebb332650330cc2">TRICKLE_TIMER_IMIN_IS_OK</a>(imin)&#160;&#160;&#160;((imin &gt; 1) &amp;&amp; (i_min &lt;= (<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; 1)))</td></tr>
<tr class="memdesc:gaf18c0aac91ab42fe0ebb332650330cc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether an Imin value is suitable considering the various restrictions imposed by our platform's clock as well as by the library itself.  <a href="#gaf18c0aac91ab42fe0ebb332650330cc2">More...</a><br /></td></tr>
<tr class="separator:gaf18c0aac91ab42fe0ebb332650330cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48f0bd27341eba9602cb971642221700"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga48f0bd27341eba9602cb971642221700">TRICKLE_TIMER_IMIN_IS_BAD</a>(imin)&#160;&#160;&#160;((imin &lt; 2) || (i_min &gt; (<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; 1)))</td></tr>
<tr class="memdesc:ga48f0bd27341eba9602cb971642221700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether an Imin value is invalid considering the various restrictions imposed by our platform's clock as well as by the library itself.  <a href="#ga48f0bd27341eba9602cb971642221700">More...</a><br /></td></tr>
<tr class="separator:ga48f0bd27341eba9602cb971642221700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82b7d1b4b6fb7d11da496229782a5ba7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga82b7d1b4b6fb7d11da496229782a5ba7">TRICKLE_TIMER_IPAIR_IS_BAD</a>(i_min,  i_max)&#160;&#160;&#160;((<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; (i_max + 1)) &lt; i_min - 1)</td></tr>
<tr class="memdesc:ga82b7d1b4b6fb7d11da496229782a5ba7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether Imin &lt;&lt; Imax is unsuitable considering the boundaries of our platform's clock_time_t.  <a href="#ga82b7d1b4b6fb7d11da496229782a5ba7">More...</a><br /></td></tr>
<tr class="separator:ga82b7d1b4b6fb7d11da496229782a5ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Trickle Timer Library: Data Representation</h2></td></tr>
<tr class="memitem:ga243193848d28e6373682b8bd2e25850a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga243193848d28e6373682b8bd2e25850a">trickle_timer_cb_t</a>) (void *ptr, uint8_t suppress)</td></tr>
<tr class="memdesc:ga243193848d28e6373682b8bd2e25850a"><td class="mdescLeft">&#160;</td><td class="mdescRight">typedef for a callback function to be defined in the protocol's implementation.  <a href="#ga243193848d28e6373682b8bd2e25850a">More...</a><br /></td></tr>
<tr class="separator:ga243193848d28e6373682b8bd2e25850a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Trickle Timer Library: Functions called by protocol implementations</h2></td></tr>
<tr class="memitem:gaf7df1a3da4f9be5e2f17c3b77668eb6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaf7df1a3da4f9be5e2f17c3b77668eb6e">trickle_timer_consistency</a> (struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *tt)</td></tr>
<tr class="memdesc:gaf7df1a3da4f9be5e2f17c3b77668eb6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called by the protocol when it hears a consistent transmission.  <a href="#gaf7df1a3da4f9be5e2f17c3b77668eb6e">More...</a><br /></td></tr>
<tr class="separator:gaf7df1a3da4f9be5e2f17c3b77668eb6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae401435f40030c5c4f0f49e813fd9afc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gae401435f40030c5c4f0f49e813fd9afc">trickle_timer_inconsistency</a> (struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *tt)</td></tr>
<tr class="memdesc:gae401435f40030c5c4f0f49e813fd9afc"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called by the protocol when it hears an inconsistent transmission.  <a href="#gae401435f40030c5c4f0f49e813fd9afc">More...</a><br /></td></tr>
<tr class="separator:gae401435f40030c5c4f0f49e813fd9afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b21d9fbed3c0c903fa1687b812a7f9c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga4b21d9fbed3c0c903fa1687b812a7f9c">trickle_timer_config</a> (struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *tt, clock_time_t i_min, uint8_t i_max, uint8_t k)</td></tr>
<tr class="memdesc:ga4b21d9fbed3c0c903fa1687b812a7f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a trickle timer.  <a href="#ga4b21d9fbed3c0c903fa1687b812a7f9c">More...</a><br /></td></tr>
<tr class="separator:ga4b21d9fbed3c0c903fa1687b812a7f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57b03043f109c0b2adb1dc92637ee8b4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga57b03043f109c0b2adb1dc92637ee8b4">trickle_timer_set</a> (struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *tt, <a class="el" href="group__trickle-timer.html#ga243193848d28e6373682b8bd2e25850a">trickle_timer_cb_t</a> proto_cb, void *ptr)</td></tr>
<tr class="memdesc:ga57b03043f109c0b2adb1dc92637ee8b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a previously configured trickle timer.  <a href="#ga57b03043f109c0b2adb1dc92637ee8b4">More...</a><br /></td></tr>
<tr class="separator:ga57b03043f109c0b2adb1dc92637ee8b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa475b1b9b3edd81df04d290bd34d7e72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#gaa475b1b9b3edd81df04d290bd34d7e72">trickle_timer_stop</a>(tt)</td></tr>
<tr class="memdesc:gaa475b1b9b3edd81df04d290bd34d7e72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop a running trickle timer.  <a href="#gaa475b1b9b3edd81df04d290bd34d7e72">More...</a><br /></td></tr>
<tr class="separator:gaa475b1b9b3edd81df04d290bd34d7e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3795c2533ccbd951226385e9b8f30f09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga3795c2533ccbd951226385e9b8f30f09">trickle_timer_reset_event</a>(tt)&#160;&#160;&#160;<a class="el" href="group__trickle-timer.html#gae401435f40030c5c4f0f49e813fd9afc">trickle_timer_inconsistency</a>(tt)</td></tr>
<tr class="memdesc:ga3795c2533ccbd951226385e9b8f30f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called by the protocol when an external event occurs that should trigger a timer reset.  <a href="#ga3795c2533ccbd951226385e9b8f30f09">More...</a><br /></td></tr>
<tr class="separator:ga3795c2533ccbd951226385e9b8f30f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga584276a4a8fdcdaf58aa9406e5214591"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trickle-timer.html#ga584276a4a8fdcdaf58aa9406e5214591">trickle_timer_is_running</a>(tt)&#160;&#160;&#160;((tt)-&gt;i_cur != <a class="el" href="group__trickle-timer.html#ga46a9d1ac6e07dc96cfd6224b873333ca">TRICKLE_TIMER_IS_STOPPED</a>)</td></tr>
<tr class="memdesc:ga584276a4a8fdcdaf58aa9406e5214591"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called in order to determine whether a trickle timer is running.  <a href="#ga584276a4a8fdcdaf58aa9406e5214591">More...</a><br /></td></tr>
<tr class="separator:ga584276a4a8fdcdaf58aa9406e5214591"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This library implements timers which behave in accordance with RFC 6206 "The Trickle Algorithm" (<a href="http://tools.ietf.org/html/rfc6206">http://tools.ietf.org/html/rfc6206</a>)</p>
<p>Protocols wishing to use trickle timers, may use this library instead of implementing the trickle algorithm internally.</p>
<p>The protocol implementation will declare one (or more) variable(s) of type struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> and will then populate its fields by calling <a class="el" href="group__trickle-timer.html#ga4b21d9fbed3c0c903fa1687b812a7f9c" title="Configure a trickle timer. ">trickle_timer_config()</a>. <a class="el" href="group__trickle-timer.html#ga57b03043f109c0b2adb1dc92637ee8b4" title="Start a previously configured trickle timer. ">trickle_timer_set()</a> will start the timer.</p>
<p>When the timer reaches time t within the current trickle interval, the library will call a protocol-provided callback, which will signal to the protocol that it is time to TX (see algorithm step 4 in the RFC).</p>
<p>The proto does not need to check the suppression conditions. This is done by the library and if TX must be suppressed, the callback won't be called at all.</p>
<p>The library also provides functions to be called when the protocol hears a 'consistent' or 'inconsistent' message and when an 'external event' occurs (in this context, those terms have the exact same meaning as in the RFC). </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga361fa866c3bba8e5a05de3b957bc04c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_COMPENSATE_DRIFT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls whether the library will try to compensate for time drifts caused by getting called later than scheduled. </p>
<p>1: Enabled (default). 0: Disabled</p>
<p>To override the default, define TRICKLE_TIMER_CONF_COMPENSATE_DRIFT in contiki-conf.h</p>
<p>Bear in mind that this controls the behaviour of the entire library (i.e. all trickle timers) and not of an individual timer </p>

</div>
</div>
<a class="anchor" id="gad47a05440295b6f171873f5f43384e56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_ERROR_CHECKING&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables/Disables error checking. </p>
<p>1: Enabled (default). The library checks the validity of Imin and Imax 0: Disabled. All error checking is turned off. This reduces code size. </p>

</div>
</div>
<a class="anchor" id="ga48f0bd27341eba9602cb971642221700"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_IMIN_IS_BAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">imin</td><td>)</td>
          <td>&#160;&#160;&#160;((imin &lt; 2) || (i_min &gt; (<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; 1)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether an Imin value is invalid considering the various restrictions imposed by our platform's clock as well as by the library itself. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imin</td><td>An Imin value in clock ticks</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>The Imin value is invalid </td></tr>
    <tr><td class="paramname">0</td><td>The Imin value is valid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf18c0aac91ab42fe0ebb332650330cc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_IMIN_IS_OK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">imin</td><td>)</td>
          <td>&#160;&#160;&#160;((imin &gt; 1) &amp;&amp; (i_min &lt;= (<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; 1)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether an Imin value is suitable considering the various restrictions imposed by our platform's clock as well as by the library itself. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imin</td><td>An Imin value in clock ticks</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>The Imin value is valid </td></tr>
    <tr><td class="paramname">0</td><td>The Imin value is invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaee0150ea3a6efe6136abcb2a9019d096"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_INTERVAL_END</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;((tt)-&gt;i_start + (tt)-&gt;i_cur)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current trickle interval's end (absolute time in ticks) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The absolute number of clock ticks when the current trickle interval will expire </dd></dl>

</div>
</div>
<a class="anchor" id="ga160b7df536d05607f970ef92d1834b8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_INTERVAL_MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;((tt)-&gt;i_max_abs)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a timer's maximum interval size (Imin &lt;&lt; Imax) as a number of clock ticks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Maximum trickle interval length in clock ticks </dd></dl>

</div>
</div>
<a class="anchor" id="ga82b7d1b4b6fb7d11da496229782a5ba7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_IPAIR_IS_BAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i_min, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i_max&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((<a class="el" href="group__trickle-timer.html#ga8c327f7f935dcc95d89fcbbc664fcdcf">TRICKLE_TIMER_CLOCK_MAX</a> &gt;&gt; (i_max + 1)) &lt; i_min - 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether Imin &lt;&lt; Imax is unsuitable considering the boundaries of our platform's clock_time_t. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i_min</td><td>Imin value </td></tr>
    <tr><td class="paramname">i_max</td><td>Maximum number of doublings</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>The pair would exceed clock boundaries </td></tr>
    <tr><td class="paramname">0</td><td>The pair is suitable for the platform</td></tr>
  </table>
  </dd>
</dl>
<p>Timers scheduled far in the future can be perceived as being scheduled in the past. Thus, we limit Imin &lt;&lt; Imax to be LEQ(TRICKLE_TIMER_CLOCK_MAX &gt;&gt; 1) + 1 </p>

</div>
</div>
<a class="anchor" id="ga584276a4a8fdcdaf58aa9406e5214591"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trickle_timer_is_running</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;((tt)-&gt;i_cur != <a class="el" href="group__trickle-timer.html#ga46a9d1ac6e07dc96cfd6224b873333ca">TRICKLE_TIMER_IS_STOPPED</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called in order to determine whether a trickle timer is running. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The timer is stopped </td></tr>
    <tr><td class="paramname">non-zero</td><td>The timer is running </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga46a9d1ac6e07dc96cfd6224b873333ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_IS_STOPPED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A trickle timer is considered 'stopped' when i_cur == TRICKLE_TIMER_IS_STOPPED. </p>
<p><a class="el" href="group__trickle-timer.html#gaa475b1b9b3edd81df04d290bd34d7e72" title="Stop a running trickle timer. ">trickle_timer_stop()</a> must be used to correctly disable a trickle timer. Do NOT set the value of i_cur to 0 directly, as this will fail to stop the timer. </p>

</div>
</div>
<a class="anchor" id="ga157285503882e567c275871fd30d3016"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_MAX_IMAX_WIDTH&#160;&#160;&#160;<a class="el" href="group__trickle-timer.html#ga63607c0782cac7d825d07bff8c89b3d4">TRICKLE_TIMER_MAX_IMAX_GENERIC</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects a flavor for the 'Find maximum Imax' (max_imax) function. </p>
<p>When configuring a new trickle timer, the library verifies that the (Imin , Imax) pair will fit in the platform's clock_time_t boundaries. If this is not the case, Imax will be adjusted down. In order to achieve this, we use an internal function which is a slight variant of a standard 'Count Leading Zeros'.</p>
<p>This functionality is disabled when <a class="el" href="group__trickle-timer.html#gad47a05440295b6f171873f5f43384e56" title="Enables/Disables error checking. ">TRICKLE_TIMER_ERROR_CHECKING</a> is 0</p>
<p>This define helps us generate, at the pre-processing stage, the desired version of this function. We start with a generic version by default. The platform's contiki-conf.h can change this to use the 16- or 32-bit specific flavor by defining TRICKLE_TIMER_CONF_MAX_IMAX_WIDTH.</p>
<p>Depending on the toolchain, the generic variant may actually result in a smaller code size. Do your own experiments.</p>
<p>TRICKLE_TIMER_MAX_IMAX_GENERIC (0): Generic function which will work regardless whether the platform uses a 16 or 32 bit wide clock type</p>
<p>TRICKLE_TIMER_MAX_IMAX_16_BIT (1): You can select this in your contiki-conf.h if your platform's clock_time_t is 16 bits wide</p>
<p>TRICKLE_TIMER_MAX_IMAX_32_BIT (2): You can select this in your contiki-conf.h if your platform's clock_time_t is 32 bits wide </p>

</div>
</div>
<a class="anchor" id="ga2b39325309fb89efa3b965437a249bef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_PROTO_TX_ALLOW</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="group__trickle-timer.html#ga2c3a5dfb5c0f102b1c9755c303620004">TRICKLE_TIMER_SUPPRESSION_DISABLED</a>(tt) || ((tt)-&gt;c &lt; (tt)-&gt;k))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the protocol must go ahead with a transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>Go ahead with TX </td></tr>
    <tr><td class="paramname">0</td><td>Suppress </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7c8719d9d4ebb06f080442e87fd514c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_PROTO_TX_SUPPRESS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="group__trickle-timer.html#ga5f4e1c6f73eb9c0a18db8434d7103bd6">TRICKLE_TIMER_SUPPRESSION_ENABLED</a>(tt) &amp;&amp; ((tt)-&gt;c &gt;= (tt)-&gt;k))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the protocol must suppress a transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>Suppress </td></tr>
    <tr><td class="paramname">0</td><td>Go ahead with TX </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3795c2533ccbd951226385e9b8f30f09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trickle_timer_reset_event</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__trickle-timer.html#gae401435f40030c5c4f0f49e813fd9afc">trickle_timer_inconsistency</a>(tt)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called by the protocol when an external event occurs that should trigger a timer reset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<p>When an external event occurs that should result in a timer reset, the protocol implementation must call this function to notify the library.</p>
<p>Before resetting the timer, the library will perform a set of checks. Therefore, it is important that the protocol calls this function instead of trying to reset the timer by itself. </p>

</div>
</div>
<a class="anchor" id="gaa475b1b9b3edd81df04d290bd34d7e72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trickle_timer_stop</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">  ctimer_stop(&amp;((tt)-&gt;ct)); \</div>
<div class="line">  (tt)-&gt;i_cur = <a class="code" href="group__trickle-timer.html#ga46a9d1ac6e07dc96cfd6224b873333ca">TRICKLE_TIMER_IS_STOPPED</a>; \</div>
<div class="line">} <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="group__trickle-timer_html_ga46a9d1ac6e07dc96cfd6224b873333ca"><div class="ttname"><a href="group__trickle-timer.html#ga46a9d1ac6e07dc96cfd6224b873333ca">TRICKLE_TIMER_IS_STOPPED</a></div><div class="ttdeci">#define TRICKLE_TIMER_IS_STOPPED</div><div class="ttdoc">A trickle timer is considered &#39;stopped&#39; when i_cur == TRICKLE_TIMER_IS_STOPPED. </div><div class="ttdef"><b>Definition:</b> trickle-timer.h:123</div></div>
</div><!-- fragment -->
<p>Stop a running trickle timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<p>This function stops a running trickle timer that was previously started with trickle_timer_start(). After this function has been called, the trickle timer will no longer call the protocol's callback and its interval will not double any more. In order to resume the trickle timer, the user application must call <a class="el" href="group__trickle-timer.html#ga57b03043f109c0b2adb1dc92637ee8b4" title="Start a previously configured trickle timer. ">trickle_timer_set()</a>.</p>
<p>The protocol implementation must NOT use <a class="el" href="group__trickle-timer.html#gaa475b1b9b3edd81df04d290bd34d7e72" title="Stop a running trickle timer. ">trickle_timer_stop()</a>, _set() cycles to reset a timer manually. Instead, in response to events or inconsistencies, the corresponding functions must be used </p>

</div>
</div>
<a class="anchor" id="ga2c3a5dfb5c0f102b1c9755c303620004"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_SUPPRESSION_DISABLED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;((tt)-&gt;k == <a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the trickle timer's suppression feature is disabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>Suppression is disabled </td></tr>
    <tr><td class="paramname">0</td><td>Suppression is enabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5f4e1c6f73eb9c0a18db8434d7103bd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_SUPPRESSION_ENABLED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tt</td><td>)</td>
          <td>&#160;&#160;&#160;((tt)-&gt;k != <a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the trickle timer's suppression feature is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>Suppression is enabled </td></tr>
    <tr><td class="paramname">0</td><td>Suppression is disabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2b3b9fd1a895243db18b35b7600bac15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_TIMER_WIDE_RAND&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns on support for 4-byte wide, unsigned random numbers. </p>
<p>We need this for platforms which have a 4-byte wide clock_time_t. For those platforms and if Imin &lt;&lt; Imax is GT 0xFFFF, random_rand alone is not always enough to generate a correct t in [I/2, I). Specifically, we need wide randoms when I &gt; 0x1FFFF.</p>
<p>For platforms with a 2-byte wide clock_time_t, this can be defined as 0 to reduce code footprint and increase speed. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga243193848d28e6373682b8bd2e25850a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*  trickle_timer_cb_t) (void *ptr, uint8_t suppress)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>typedef for a callback function to be defined in the protocol's implementation. </p>
<p>Those callbaks are stored as a function pointer inside a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure and are called by the library at time t within the current trickle interval.</p>
<p>Some protocols may rely on multiple trickle timers. For this reason, this function's argument will be an opaque pointer, aiming to help the protocol determine which timer triggered the call.</p>
<p>The <em>suppress</em> argument is used so that the library can signal the protocol whether it should TX or suppress </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga4b21d9fbed3c0c903fa1687b812a7f9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t trickle_timer_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *&#160;</td>
          <td class="paramname"><em>tt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">clock_time_t&#160;</td>
          <td class="paramname"><em>i_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>i_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a trickle timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure </td></tr>
    <tr><td class="paramname">i_min</td><td>The timer's Imin configuration parameter, in units of clock_time_t </td></tr>
    <tr><td class="paramname">i_max</td><td>The timer's Imax configuration parameter (maximum number of doublings), specified as number of doublings </td></tr>
    <tr><td class="paramname">k</td><td>The timer's K (redundancy constant). If the value of K equals <a class="el" href="group__trickle-timer.html#ga72117b57dd1e192ca8a016055d2310f3" title="Set as value of k to disable suppression. ">TRICKLE_TIMER_INFINITE_REDUNDANCY</a>, message suppression will be disabled </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Error (Bad argument) </td></tr>
    <tr><td class="paramname">non-zero</td><td>Success.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is used to set the initial configuration for a trickle timer. A trickle timer MUST be configured before the protocol calls <a class="el" href="group__trickle-timer.html#ga57b03043f109c0b2adb1dc92637ee8b4" title="Start a previously configured trickle timer. ">trickle_timer_set()</a>.</p>
<p>If Imin&lt;&lt;Imax would exceed the platform's clock_time_t boundaries, this function adjusts Imax to the maximum permitted value for the provided Imin. This means that in a network with heterogenous hardware, 'we' are likely to have a different Imax than 'some of them'. See RFC 6206, sec 6.3 for the consequences of this situation </p>

</div>
</div>
<a class="anchor" id="gaf7df1a3da4f9be5e2f17c3b77668eb6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trickle_timer_consistency </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *&#160;</td>
          <td class="paramname"><em>tt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called by the protocol when it hears a consistent transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<p>When the trickle-based protocol hears a consistent transmission it must call this function to increment trickle's consistency counter, which is later used to determine whether the protocol must suppress or go ahead with its own transmissions.</p>
<p>As the trickle timer library implementation may change in the future to perform further tasks upon reception of a consistent transmission, the protocol's implementation MUST use this call to increment the consistency counter instead of directly writing to the structure's field. </p>

</div>
</div>
<a class="anchor" id="gae401435f40030c5c4f0f49e813fd9afc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trickle_timer_inconsistency </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *&#160;</td>
          <td class="paramname"><em>tt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called by the protocol when it hears an inconsistent transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<p>When the protocol hears an inconsistent transmission, it must call this function to notify the library that the timer must be reset.</p>
<p>Before resetting the timer, the library will perform a set of checks. Therefore, it is important that the protocol calls this function instead of trying to reset the timer by itself. </p>

</div>
</div>
<a class="anchor" id="ga57b03043f109c0b2adb1dc92637ee8b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t trickle_timer_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtrickle__timer.html">trickle_timer</a> *&#160;</td>
          <td class="paramname"><em>tt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__trickle-timer.html#ga243193848d28e6373682b8bd2e25850a">trickle_timer_cb_t</a>&#160;</td>
          <td class="paramname"><em>proto_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a previously configured trickle timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>A pointer to a <a class="el" href="structtrickle__timer.html">trickle_timer</a> structure </td></tr>
    <tr><td class="paramname">proto_cb</td><td>A pointer to a callback function, which will be invoked at at time t within the current trickle interval </td></tr>
    <tr><td class="paramname">ptr</td><td>An opaque pointer which will be passed as the argument to proto_cb when the timer fires. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Error (tt was null or the timer was not configured properly) </td></tr>
    <tr><td class="paramname">non-zero</td><td>Success.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is used to set a trickle timer. The protocol implementation must use this function ONLY to initialise a new trickle timer and NOT to reset it as a result of external events or inconsistencies.</p>
<p>The protocol implementation must configure the trickle timer by calling <a class="el" href="group__trickle-timer.html#ga4b21d9fbed3c0c903fa1687b812a7f9c" title="Configure a trickle timer. ">trickle_timer_config()</a> before calling this function. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 23 2014 04:20:20 for ContikiUT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
